<form class="update-form"
      th:method="patch"
      th:action="@{'/admin-panel/edit/' + ${user.id}}">
    <div class="param-group">
        <div class="param">
            <input id="email" type="text" name="email" th:value="${user.email}" required>
        </div>

        <div class="param">
            <input id="username" type="text" name="username" th:value="${user.username}" required/>
        </div>

        <th:block th:if="${userToEdit != null && userToEdit.id == user.id}">
            <select class="change-roles" name="role" required>
                <option th:each="possibleRole : ${possibleRoles}"
                        th:id="${user.role}"
                        th:selected="${possibleRole == user.role}"
                        th:value="${possibleRole}"
                        th:text="${possibleRole}">
                </option>
            </select>
        </th:block>

        <th:block th:unless="${userToEdit != null && userToEdit.id == user.id}">
            <div class="param-role">
                <input id="role" type="text" name="role" th:value="${user.role}" disabled/>
            </div>
        </th:block>
    </div>

    <div class="btn-group">
        <button class="admin-form-btn"
           onclick="return confirm('Are you sure that you want to update the marked user?');"
           th:href="@{'/admin-panel/edit/' + ${user.id}}">Update</button>
        <a class="admin-form-btn"
           th:href="@{'/admin-panel'}">Cancel</a>
    </div>

    <th:block th:if="${valueErrors != null && !valueErrors.isEmpty()}">
        <div class="error new-note error-list">
            <th:block th:each="error: ${valueErrors}">
                <p class="error" th:text="${valueErrors[error.key]}"></p>
            </th:block>
        </div>
    </th:block>
</form>
